#!/bin/bash

# ML Community Platform - Quick Start Script
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ –∏ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

set -e

echo "üöÄ ML Community Platform - Quick Start"
echo "======================================"
echo

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
if [ "$EUID" -ne 0 ]; then
    echo "‚ùå –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ root –∏–ª–∏ —á–µ—Ä–µ–∑ sudo"
    echo "   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: sudo ./quick_start.sh"
    exit 1
fi

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
echo "üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã..."
apt update -y
apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ pip
echo "üêç –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python..."
apt install -y python3 python3-pip python3-venv python3-dev

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
echo "üìÅ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git..."
apt install -y git

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
cd "$(dirname "$0")"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞..."
pip3 install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
echo "üåê –ó–∞–ø—É—Å–∫ –≤–µ–±-—É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞..."
echo
echo "=========================================="
echo "üéØ –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∑–∞–ø—É—â–µ–Ω!"
echo "üì± –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "   http://localhost:5000"
echo
echo "‚èπÔ∏è  –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C"
echo "=========================================="
echo

python3 app.py